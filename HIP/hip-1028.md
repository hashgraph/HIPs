---
hip: 1028
title: Metadata management via SmartContracts
author: Mustafa Uzun <mustafa.uzun@limechain.tech>, Luke Lee <luke.lee@swirldslabs.com>
working-group: Valentin Valkanov <valentin.valkanov@limechain.tech>, David Bakin <david.bakin@swirldsbals.com>
type: Standards Track
category: Service
needs-council-approval: Yes
status: Draft
last-call-date-time:
created: 2024-08-15
discussions-to:
requires: 646, 657, 765
updated: 2024-08-15
---

## Abstract

HIP-646/657/765 introduces a new metadata field for Fungible Tokens (FT), Non-Fungible Tokens (NFT) and METADATA key  
for updating metadata. However, these features are not supported by smart contracts.  
This proposal aims to enhance Hedera Smart Contract Service (HSCS) by exposing HIP-646/657/765 features.

## Motivation

A user may need to create, update and get info for Fungible Tokens (FT), Non-Fungible Tokens (NFT) and METADATA key through contract.  
The current version of Hedera Smart Contract Service (HSCS) does not cover these use cases.

## Rationale

The HSCS already has the functionality to create and update tokens, so we would want to extend these.  

However, we will add new functions for getting info for tokens to not break the older version of ``HederaTokenService.sol``  

New function  for TokenUpdateNfts HAPI operation will be added  

## User stories

1. As an EOA I would like to initiate a smart contract transaction that creates a fungible token with metadata.
2. As an EOA I would like to initiate a smart contract transaction that creates a non-fungible token collection with metadata.
3. As an EOA I would like to initiate a smart contract transaction that updates a fungible token with metadata.
4. As an EOA I would like to initiate a smart contract transaction that updates a non-fungible token collection with metadata.
5. As an EOA I would like to initiate a smart contract transaction that creates a fungible token with a metadata key.
6. As an EOA I would like to initiate a smart contract transaction that creates a non-fungible token collection with metadata key.
7. As an EOA I would like to initiate a smart contract transaction that updates a fungible token with metadata key.
8. As an EOA I would like to initiate a smart contract transaction that updates a non-fungible token collection with metadata key.
9. As an EOA I would like to initiate a smart contract transaction that creates a fungible token with metadata and metadata key.
10. As an EOA I would like to initiate a smart contract transaction that creates a non-fungible token collection with metadata and metadata key.
11. As an EOA I would like to initiate a smart contract transaction that updates the metadata of NFT(s).

## Specification

We will utilize the existing Hedera Token Service (HTS) HAPI transactions.  
To achieve this the Hedera Token Service (HTS) system contract must be updated to expose the necessary features.  
Existing system contract functions must be extended and new functions must be added to the `IHederaTokenService` interface  
to support the metadata field and key.

### System contract extension

The `IHederaTokenService.sol` is further extended with new types and function signatures that the system contract will respond to.

### Solidity Function Signatures
TBD

| Hash | Selector | Return |
| --- | --- | --- |
| 3299b72c|`updateNftsMetadata(address token, int64[] serialNumbers, bytes metadata)`| ResponseCode|

## Backwards Compatibility
Backward compatibility is ensured by adding new functions where needed.

## Security Implications

The HIP provides exposure to existing HTS functionality. Fundamentally security is still governed by the ledger security logic  
in combination with the EVM. As such, there should be no security implications.

## References

- [HIP-646](https://hips.hedera.com/hip/hip-646)
- [HIP-657](https://hips.hedera.com/hip/hip-657)
- [HIP-765](https://hips.hedera.com/hip/hip-765)

## Copyright/license

This document is licensed under the Apache License, Version 2.0 -- see [LICENSE](notion://www.notion.so/LICENSE) or (https://www.apache.org/licenses/LICENSE-2.0)